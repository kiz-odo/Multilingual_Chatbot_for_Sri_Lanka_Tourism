# ==========================================
# Sri Lanka Tourism Chatbot - Complete Requirements
# Pinned versions for production stability
# ==========================================

# ==========================================
# CORE FRAMEWORK
# ==========================================
fastapi==0.109.2  # Modern FastAPI with anyio 4.x support
uvicorn[standard]==0.27.1  # ASGI server (compatible with anyio 4.x)
gunicorn==21.2.0  # Production WSGI server
pydantic>=2.7.4  # Data validation (relaxed for langchain compatibility)
pydantic-settings>=2.1.0  # Settings management

# ==========================================
# DATABASE
# ==========================================
motor==3.3.2  # Async MongoDB driver
pymongo==4.6.1  # MongoDB driver
beanie==1.24.0  # ODM for MongoDB

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================
python-jose[cryptography]==3.3.0  # JWT tokens
passlib[bcrypt]==1.7.4  # Password hashing
bcrypt==4.1.2  # Password hashing algorithm
cryptography==42.0.2  # Cryptographic operations (Python 3.12 compatible)
python-multipart>=0.0.7  # Form data parsing (relaxed for strawberry-graphql)
pyotp==2.9.0  # TOTP for MFA
qrcode[pil]==7.4.2  # QR code generation for MFA
bleach==6.1.0  # HTML/XSS sanitization

# ==========================================
# CACHING & QUEUE
# ==========================================
redis==5.0.1  # Redis client
celery==5.3.4  # Distributed task queue

# ==========================================
# AI & NLP CORE
# ==========================================
# Note: Rasa runs in separate container - see docker-compose.yml
spacy==3.7.2  # NLP framework
nltk==3.8.1  # Natural language toolkit
textblob==0.17.1  # Text processing
langdetect==1.0.9  # Language detection

# ==========================================
# LLM APIs (Hybrid AI System)
# Multi-LLM fallback chain (100% FREE): Gemini → Qwen → Mistral
# ==========================================
google-genai>=1.0.0  # Google Gemini API (New SDK - replaces deprecated google-generativeai)
mistralai>=1.0.0  # Mistral AI API (Fallback 1)
#openai==1.12.0  # OpenAI API (Fallback 2)
#groq==0.4.2  # Groq API (Fast inference with llama-3) - REMOVED
#anthropic==0.8.1  # Claude API support (Optional)

# LLM Orchestration & Chain Management
langchain>=0.3.1  # LLM orchestration framework
langchain-huggingface>=0.1.0  # LangChain HuggingFace integration
langchain-community>=0.3.1  # LangChain community integrations

# ==========================================
# SEARCH APIS
# ==========================================
tavily-python>=0.3.0  # AI-optimized web search (RECOMMENDED for chatbots)
# google-api-python-client>=2.0.0  # Google Custom Search (alternative)

# ==========================================
# MULTI-AGENT ORCHESTRATION
# ==========================================
crewai>=0.1.0  # Multi-agent framework
crewai-tools>=0.1.0  # CrewAI tools
nest-asyncio>=1.5.8  # Allow nested event loops (for CrewAI tools)

# ==========================================
# LOCAL LLM SUPPORT (Optional - for offline mode)
# ==========================================
transformers==4.38.2  # Hugging Face transformers - Heavy dependency
torch==2.2.1  # PyTorch for model inference - Heavy dependency (~2GB)
accelerate==0.27.2  # Fast model loading
#Uncomment above if you need local LLM inference (offline mode)

# ==========================================
# VECTOR STORE & EMBEDDINGS (for RAG)
# ==========================================
faiss-cpu==1.8.0  # Facebook AI Similarity Search
sentence-transformers==2.3.1  # Sentence embeddings

# ==========================================
# IMAGE PROCESSING
# ==========================================
opencv-python-headless==4.9.0.80  # Headless OpenCV for servers
pillow==10.2.0  # Image processing library (used in landmark recognition)
# tensorflow==2.15.0  # Optional - Heavy dependency (~500MB) - Used in landmark_recognition_service.py
# Uncomment tensorflow if you need landmark recognition with ML models

# ==========================================
# EXTERNAL APIs & INTEGRATIONS
# ==========================================
deep-translator==1.11.4  # Translation APIs
requests==2.31.0  # HTTP library
httpx==0.27.0  # Async HTTP client (compatible with google-genai)

# Google Cloud Services (Optional - requires credentials)
google-cloud-translate==3.15.0  # Google Cloud Translation
google-cloud-speech==2.26.0  # Google Cloud Speech-to-Text
google-cloud-texttospeech==2.16.3  # Google Cloud Text-to-Speech
googlemaps==4.10.0  # Google Maps API
firebase-admin==6.4.0  # Firebase Admin SDK

# ==========================================
# OAUTH2 & SOCIAL LOGIN
# ==========================================
google-auth==2.28.0  # Google OAuth2
google-auth-oauthlib==1.2.0  # Google OAuth2 library
google-auth-httplib2==0.2.0  # Google HTTP library

# ==========================================
# EXPORT FEATURES
# ==========================================
reportlab==4.0.9  # PDF generation
google-api-python-client==2.116.0  # Google Calendar API

# ==========================================
# GRAPHQL
# ==========================================
strawberry-graphql[fastapi]==0.220.0  # GraphQL for FastAPI

# ==========================================
# DATA SCIENCE & ANALYTICS
# ==========================================
numpy==1.26.4  # Numerical computing
pandas==2.2.0  # Data manipulation
scikit-learn==1.4.0  # Machine learning
matplotlib==3.8.2  # Optional - for visualization

# ==========================================
# UTILITIES
# ==========================================
python-dotenv==1.0.1  # Environment variables
email-validator==2.1.0  # Email validation
aiofiles==23.2.1  # Async file operations

# ==========================================
# MONITORING & LOGGING
# ==========================================
prometheus-client==0.19.0  # Prometheus metrics
python-json-logger==2.0.7  # JSON structured logging
sentry-sdk[fastapi]==1.40.6  # Error tracking with FastAPI integration

# Distributed Tracing (OpenTelemetry) - Updated to compatible versions
opentelemetry-api>=1.15.0  # OpenTelemetry API (flexible version)
opentelemetry-sdk>=1.15.0  # OpenTelemetry SDK
opentelemetry-instrumentation-fastapi>=0.40b0  # FastAPI auto-instrumentation
opentelemetry-instrumentation-pymongo>=0.40b0  # MongoDB instrumentation
opentelemetry-instrumentation-redis>=0.40b0  # Redis instrumentation
opentelemetry-instrumentation-requests>=0.40b0  # HTTP requests instrumentation
opentelemetry-instrumentation-logging>=0.40b0  # Logging instrumentation
opentelemetry-instrumentation-celery>=0.40b0  # Celery instrumentation
opentelemetry-exporter-otlp-proto-grpc>=1.15.0  # OTLP gRPC exporter

# ==========================================
# RELIABILITY & RESILIENCE
# ==========================================
tenacity==8.2.3  # Retry with exponential backoff and circuit breaker

# ==========================================
# CLOUD SERVICES (Production)
# ==========================================
boto3==1.34.51  # AWS SDK for S3 backups

# ==========================================
# DEVELOPMENT & TESTING
# ==========================================
pytest==7.4.4  # Testing framework
pytest-asyncio==0.23.4  # Async test support
pytest-cov==4.1.0  # Coverage reporting
pytest-mock==3.12.0  # Mocking support
black==24.1.1  # Code formatter
isort==5.13.2  # Import sorter
flake8==7.0.0  # Linting (legacy)
ruff==0.2.1  # Modern fast linter (configured in pyproject.toml)
mypy==1.8.0  # Static type checking
pre-commit==3.6.1  # Git hooks
locust==2.23.1  # Load testing (used in load_tests/locustfile.py)

# ==========================================
# RASA ACTIONS DEPENDENCIES
# ==========================================
# rasa-sdk==3.7.0  # Commented out - runs in separate Docker container
typing-extensions==4.9.0  # Type hints support

# ==========================================
# AUDIO PROCESSING (Optional - requires system libraries)
# ==========================================
speechrecognition==3.10.1  # Speech recognition (optional)
gtts==2.5.1  # Google Text-to-Speech (optional)
pyaudio==0.2.14  # Audio I/O (requires PortAudio) - Commented: requires system deps
librosa==0.10.1  # Audio analysis (optional)
pydub==0.25.1  # Audio manipulation (optional)

# ==========================================
# RATE LIMITING & API MANAGEMENT
# ==========================================
slowapi==0.1.9  # Rate limiting for FastAPI
limits==3.10.0  # Rate limiting utilities

# ==========================================
# WEBSOCKET SUPPORT
# ==========================================
websockets>=10.4  # WebSocket support
python-socketio==5.11.0  # Socket.IO support

# ==========================================
# ADDITIONAL UTILITIES
# ==========================================
python-dateutil==2.8.2  # Date utilities
pytz==2024.1  # Timezone support
pyyaml==6.0.1  # YAML parser
ujson==5.9.0  # Fast JSON parser
orjson==3.9.15  # Faster JSON library
phonenumbers==8.13.29  # Phone number validation
pycountry==23.12.11  # ISO country/language data

